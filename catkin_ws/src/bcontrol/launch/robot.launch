<launch>
  <!-- This file contains nodes that form the base on which the robot stack can be run. -->

  <arg name="launch_vicon" default="true" />

  <include file="$(find brobohub)/launch/base.launch">
    <arg name="config" value="brobohub_um7" />
  </include>
  <include file="$(find brobohub)/launch/um7.launch"/>

  <!-- VICON (for positioning) -->
  <!--
    FIXME: Could revert to the RoboHub vicon repo and replace max_publish_frequency
    with http://wiki.ros.org/topic_tools/throttle
  -->
  <include file="$(find vicon_bridge)/launch/vicon.launch" if="$(arg launch_vicon)">
    <arg name="datastream_hostport" value="129.97.71.102:801"/>
    <arg name="vicon_world_frame" value="map"/>
    <arg name="max_publish_frequency" value="100.0"/>
  </include>

  <!-- throttle position measurements to mimic GPS rate -->
  <node name="vicon_odom_msg_throttle" pkg="topic_tools" type="throttle" args="messages /vicon/ben_jackal2/ben_jackal2/odom 1.0 /global_localization/robot/odom" />

  <!-- Telemetry -->
  <node name="foxglove_bridge" pkg="foxglove_bridge" type="foxglove_bridge" output="screen" respawn="true" />
</launch>
